{% extends "blogengine/includes/base.html" %}
{% load custom_markdown %}
{% load blog %}

{% block content %}
<head>
     {% load staticfiles %}
    <link rel="stylesheet" type="text/css" href="{% static 'javascript/main.css' %}"/>
    <script type="text/javascript" src="{% static 'javascript/jquery.min.js' %}"></script>
</head>

{% if object_list %} 

<section class="color-5">
<div class = "container">
<br>
   <div id = "content1">

      {% for post in object_list %}
      <div class="content1-pane">
         <article>
            <nav class="cl-effect-1">
                   <a href="{{ post.get_absolute_url }}" title="View this post" style="text-decoration:none;" >{{ post.title }}</a>
                    <ul class="postinfo"></ul>
            </nav>
                <p> {{ post.text|custom_markdown }}</p>
                
                <ul class="postinfo">
                <li>
                <p class="blogdatefont">{{ post.pub_date|date:"F d, Y" }}</p>
                </li>
                </ul>
                
            {% if post.category %}
      
               <a href="{{ post.category.get_absolute_url }}"><span class="label label-primary">{{ post.category.name }}</span></a>
 
            {% endif %}
            {% if post.tags %}
            {% for tag in post.tags.all %}
            <a href="{{ tag.get_absolute_url }}"><span class="label label-success">{{ tag.name }}</span></a>
            {% endfor %}
            {% endif %}
      
         </article>
      </div>
      {% endfor %}

      {% else %}
      <p>Whoops seems like no post have been found, I most likely lost my data if you are seeing this. Good thing we always back up data right ! Please let me know if you see this message. </p>
      {% endif %}

    
           <ul class="pager">
         {% if page_obj.has_previous %}
    
         <li class="previous"><a href="/blog/{{ page_obj.previous_page_number }}/">Previous Page</a></li>
         {% endif %}
         {% if page_obj.has_next %}
         <li class="next"><a href="/blog/{{ page_obj.next_page_number }}/">Next Page</a></li>
    {% endif %}
          </ul>
</div>
<aside id="sidebar">
    <section id="about">
            <h3>About</h3>
            <p>Welcome to my blog. My main interets are in the domain of programming, computers, weightlifting, and eSports. I will be sharing pieces of code and technology that I find interesting or useful. If there are any errors in any of the information or in a tutorial please send me an email. I am always interested in feedback, suggestions, and conversation.</p>
                   </section>
             <section id="categories">
            <h3>Categories</h3>
                    <p>
                    <ul>
                    {% get_blog_categories as categories %}
                        <nav class="cl-effect-6">
                    {% for c in categories %}
                  
                        <li><a style="text-decoration:none;"href="/blog/category/{{c.slug}}/">{{ c.name }}</a></li>
                
                    {% endfor %}
                        </nav>
                    </ul>
                </p>
            <ul>
            </ul>
            <h3>Recent Posts</h3>
          <p>
              <ul>
              {% get_recent_posts 5 as recent_posts %}
                     <nav class="cl-effect-6">
              {% for p in recent_posts %}
       
                  <li><a href="{{ p.get_absolute_url }}" style="text-decoration:none;" title="View this post">{{ p.title }}</a></li>
           
              {% endfor %}
                   </nav>
              </ul>
          </p>

          {% get_archive %}
   <h3>Archives-arino</h3>

   <aside class="accordion">
             {% for event_year in test %}
              <h1>{{event_year.keys.0}}</h1>
                   <div>
        
            {% for month, events in event_year.values.0.items %}
                <!--show only months with events! -->
                {% if events %} 
                    <h2>{{month}}</h2>
                        <div>
            <br>
                        {% for event in events %}
                               <nav class="cl-effect-66">
                            <li><a class="archivefont" style="text-decoration:none;" href="{{event.get_absolute_url }}">{{event.title}} {{event.pub_date}}</a></li>
                          </nav>
                        {% endfor %}
                      </div>
                       
                    </li>
                {% endif %}
            </li>
            {% endfor %}
        </div>
  
      {% endfor %}
    </aside>

  
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

 <aside class="accordion">
  <h1>News</h1>
  <div>
    <h2>News Item #1</h2>
    <div>
      <a>1</a><br>
      <a>1</a><br>
      <a>1</a>
      
    </div>
    
    <h2>News Item #2</h2>
    <div>
      <a>1</a><br>
      <a>1</a><br>
      <a>1</a>
    </div>
    <h2>News Item #3</h2>
    <div>
      <a>1</a><br>
      <a>1</a><br>
      <a>1</a>
    </div>
  </div>
  
  
  
    </div>
  </div>
</aside>
    </div>

    <script>
      $( function() {
        /*
        - how to call the plugin:
        $( selector ).cbpNTAccordion( [options] );
        - destroy:
        $( selector ).cbpNTAccordion( 'destroy' );
        */

        $( '#cbp-ntaccordion' ).cbpNTAccordion();

      } );
    </script>
</aside>
</div>
</div>

</section>

<script>
    // toggle month
    var toggleMonth = function(month) {
        $(month).children('.events').slideToggle('slow');
        $(month).find('.month-data div.collapsed').toggle();
        $(month).find('.month-data div.expanded').toggle(); 
    }

    // expand the current month
    toggleMonth($('#{{now.year}}-{{now.month}}'));
    
    // intercept click to toggle month
    $('.month-data').click(function() {
        var month = $(this).parent();
        toggleMonth(month);
    });
</script>

<script>
var headers = ["H1","H2","H3","H4","H5","H6"];

$(".accordion").click(function(e) {
  var target = e.target,
      name = target.nodeName.toUpperCase();
  
  if($.inArray(name,headers) > -1) {
    var subItem = $(target).next();
    
    //slideUp all elements (except target) at current depth or greater
    var depth = $(subItem).parents().length;
    var allAtDepth = $(".accordion p, .accordion div").filter(function() {
      if($(this).parents().length >= depth && this !== subItem.get(0)) {
        return true; 
      }
    });
    $(allAtDepth).slideUp("fast");
    
    //slideToggle target content and adjust bottom border if necessary
    subItem.slideToggle("fast",function() {
        $(".accordion :visible:last").css("border-radius","0 0 10px 10px");
    });
    $(target).css({"border-bottom-right-radius":"0", "border-bottom-left-radius":"0"});
  }
});
</script>

{% endblock %}
